#include <iostream>
#include <string>
#include <algorithm>
using namespace std;


int main(){

    ios_base::sync_with_stdio(false);
    cin.tie(0);

    int t;
    cin >> t;


    while (t--) {
        char u[3][3] = {{'w','w','w'},{'w','w','w'},{'w','w','w'}};
        char d[3][3] = {{'y','y','y'},{'y','y','y'},{'y','y','y'}};
        char f[3][3] = {{'r','r','r'},{'r','r','r'},{'r','r','r'}};
        char b[3][3] = {{'o','o','o'},{'o','o','o'},{'o','o','o'}};
        char l[3][3] = {{'g','g','g'},{'g','g','g'},{'g','g','g'}};
        char r[3][3] = {{'b','b','b'},{'b','b','b'},{'b','b','b'}};

        char pre_u[3][3], pre_d[3][3], pre_f[3][3], pre_b[3][3], pre_l[3][3], pre_r[3][3];

        int n;
        cin >> n;

        for (int i = 0; i < n; i++) {
            char a[3];
            cin >> a;

            for (int j = 0; j < 3; j++) {

                for (int k = 0; k < 3; k++) {
                    pre_u[j][k] = u[j][k];
                    pre_d[j][k] = d[j][k];
                    pre_l[j][k] = l[j][k];
                    pre_r[j][k] = r[j][k];
                    pre_f[j][k] = f[j][k];
                    pre_b[j][k] = b[j][k];
                }
            }

            if (a[0] == 'U') {
                if (a[1] == '+') {
                    u[0][0] = pre_u[0][2];
                    u[1][0] = pre_u[0][1];
                    u[2][0] = pre_u[0][0];
                    u[0][1] = pre_u[1][2];
                    u[1][1] = pre_u[1][1];
                    u[2][1] = pre_u[1][0];
                    u[0][2] = pre_u[2][2];
                    u[1][2] = pre_u[2][1];
                    u[2][2] = pre_u[2][0];

                    l[2][0] = pre_f[0][0];
                    l[2][1] = pre_f[1][0];
                    l[2][2] = pre_f[2][0];


                    r[0][0] = pre_b[2][0];
                    r[0][1] = pre_b[1][0];
                    r[0][2] = pre_b[0][0];

                    b[0][0] = pre_l[2][0];
                    b[1][0] = pre_l[2][1];
                    b[2][0] = pre_l[2][2];

                    f[0][0] = pre_r[0][2];
                    f[1][0] = pre_r[0][1];
                    f[2][0] = pre_r[0][0];

                } else if (a[1] == '-') {
                    u[0][0] = pre_u[2][0];
                    u[1][0] = pre_u[2][1];
                    u[2][0] = pre_u[2][2];
                    u[0][1] = pre_u[1][0];
                    u[1][1] = pre_u[1][1];
                    u[2][1] = pre_u[1][2];
                    u[0][2] = pre_u[0][0];
                    u[1][2] = pre_u[0][1];
                    u[2][2] = pre_u[0][2];

                    l[2][0] = pre_b[0][0];
                    l[2][1] = pre_b[1][0];
                    l[2][2] = pre_b[2][0];


                    r[0][0] = pre_f[2][0];
                    r[0][1] = pre_f[1][0];
                    r[0][2] = pre_f[0][0];

                    b[0][0] = pre_r[0][2];
                    b[1][0] = pre_r[0][1];
                    b[2][0] = pre_r[0][0];

                    f[0][0] = pre_l[2][0];
                    f[1][0] = pre_l[2][1];
                    f[2][0] = pre_l[2][2];

                }

            }else if(a[0] == 'D') {
                if (a[1] == '+') {
                    d[0][0] = pre_d[0][2];
                    d[1][0] = pre_d[0][1];
                    d[2][0] = pre_d[0][0];
                    d[0][1] = pre_d[1][2];
                    d[1][1] = pre_d[1][1];
                    d[2][1] = pre_d[1][0];
                    d[0][2] = pre_d[2][2];
                    d[1][2] = pre_d[2][1];
                    d[2][2] = pre_d[2][0];

                    l[0][0] = pre_b[0][2];
                    l[0][1] = pre_b[1][2];
                    l[0][2] = pre_b[2][2];


                    r[2][0] = pre_f[2][2];
                    r[2][1] = pre_f[1][2];
                    r[2][2] = pre_f[0][2];

                    b[0][2] = pre_r[2][2];
                    b[1][2] = pre_r[2][1];
                    b[2][2] = pre_r[2][0];

                    f[0][2] = pre_l[0][0];
                    f[1][2] = pre_l[0][1];
                    f[2][2] = pre_l[0][2];

                } else if (a[1] == '-') {
                    d[0][0] = pre_d[2][0];
                    d[1][0] = pre_d[2][1];
                    d[2][0] = pre_d[2][2];
                    d[0][1] = pre_d[1][0];
                    d[1][1] = pre_d[1][1];
                    d[2][1] = pre_d[1][2];
                    d[0][2] = pre_d[0][0];
                    d[1][2] = pre_d[0][1];
                    d[2][2] = pre_d[0][2];

                    l[0][0] = pre_f[0][2];
                    l[0][1] = pre_f[1][2];
                    l[0][2] = pre_f[2][2];


                    r[2][0] = pre_b[2][2];
                    r[2][1] = pre_b[1][2];
                    r[2][2] = pre_b[0][2];

                    b[0][2] = pre_l[0][0];
                    b[1][2] = pre_l[0][1];
                    b[2][2] = pre_l[0][2];

                    f[0][2] = pre_r[2][2];
                    f[1][2] = pre_r[2][1];
                    f[2][2] = pre_r[2][0];
                }

            }else if(a[0] == 'F'){
                if (a[1] == '+') {
                    f[0][0] = pre_f[0][2];
                    f[1][0] = pre_f[0][1];
                    f[2][0] = pre_f[0][0];
                    f[0][1] = pre_f[1][2];
                    f[1][1] = pre_f[1][1];
                    f[2][1] = pre_f[1][0];
                    f[0][2] = pre_f[2][2];
                    f[1][2] = pre_f[2][1];
                    f[2][2] = pre_f[2][0];

                    l[0][2] = pre_d[2][0];
                    l[1][2] = pre_d[1][0];
                    l[2][2] = pre_d[0][0];


                    r[0][2] = pre_u[0][2];
                    r[1][2] = pre_u[1][2];
                    r[2][2] = pre_u[2][2];

                    u[0][2] = pre_l[0][2];
                    u[1][2] = pre_l[1][2];
                    u[2][2] = pre_l[2][2];

                    d[0][0] = pre_r[2][2];
                    d[1][0] = pre_r[1][2];
                    d[2][0] = pre_r[0][2];

                } else if (a[1] == '-') {
                    f[0][0] = pre_f[2][0];
                    f[1][0] = pre_f[2][1];
                    f[2][0] = pre_f[2][2];
                    f[0][1] = pre_f[1][0];
                    f[1][1] = pre_f[1][1];
                    f[2][1] = pre_f[1][2];
                    f[0][2] = pre_f[0][0];
                    f[1][2] = pre_f[0][1];
                    f[2][2] = pre_f[0][2];

                    l[0][2] = pre_u[0][2];
                    l[1][2] = pre_u[1][2];
                    l[2][2] = pre_u[2][2];


                    r[0][2] = pre_d[2][0];
                    r[1][2] = pre_d[1][0];
                    r[2][2] = pre_d[0][0];

                    u[0][2] = pre_r[0][2];
                    u[1][2] = pre_r[1][2];
                    u[2][2] = pre_r[2][2];

                    d[0][0] = pre_l[2][2];
                    d[1][0] = pre_l[1][2];
                    d[2][0] = pre_l[0][2];
                }
            }else if(a[0] == 'B'){
                if (a[1] == '+') {
                    b[0][0] = pre_b[0][2];
                    b[1][0] = pre_b[0][1];
                    b[2][0] = pre_b[0][0];
                    b[0][1] = pre_b[1][2];
                    b[1][1] = pre_b[1][1];
                    b[2][1] = pre_b[1][0];
                    b[0][2] = pre_b[2][2];
                    b[1][2] = pre_b[2][1];
                    b[2][2] = pre_b[2][0];

                    l[0][0] = pre_u[0][0];
                    l[1][0] = pre_u[1][0];
                    l[2][0] = pre_u[2][0];


                    r[0][0] = pre_d[2][2];
                    r[1][0] = pre_d[1][2];
                    r[2][0] = pre_d[0][2];

                    u[0][0] = pre_r[0][0];
                    u[1][0] = pre_r[1][0];
                    u[2][0] = pre_r[2][0];

                    d[0][2] = pre_l[2][0];
                    d[1][2] = pre_l[1][0];
                    d[2][2] = pre_l[0][0];

                } else if (a[1] == '-') {
                    b[0][0] = pre_b[2][0];
                    b[1][0] = pre_b[2][1];
                    b[2][0] = pre_b[2][2];
                    b[0][1] = pre_b[1][0];
                    b[1][1] = pre_b[1][1];
                    b[2][1] = pre_b[1][2];
                    b[0][2] = pre_b[0][0];
                    b[1][2] = pre_b[0][1];
                    b[2][2] = pre_b[0][2];

                    l[0][0] = pre_d[2][2];
                    l[1][0] = pre_d[1][2];
                    l[2][0] = pre_d[0][2];


                    r[0][0] = pre_u[0][0];
                    r[1][0] = pre_u[1][0];
                    r[2][0] = pre_u[2][0];

                    u[0][0] = pre_l[0][0];
                    u[1][0] = pre_l[1][0];
                    u[2][0] = pre_l[2][0];

                    d[0][2] = pre_r[2][0];
                    d[1][2] = pre_r[1][0];
                    d[2][2] = pre_r[0][0];
                }
            }else if(a[0] == 'L'){
                if (a[1] == '+') {
                    l[0][0] = pre_l[0][2];
                    l[1][0] = pre_l[0][1];
                    l[2][0] = pre_l[0][0];
                    l[0][1] = pre_l[1][2];
                    l[1][1] = pre_l[1][1];
                    l[2][1] = pre_l[1][0];
                    l[0][2] = pre_l[2][2];
                    l[1][2] = pre_l[2][1];
                    l[2][2] = pre_l[2][0];

                    d[0][0] = pre_f[0][0];
                    d[0][1] = pre_f[0][1];
                    d[0][2] = pre_f[0][2];


                    f[0][0] = pre_u[0][0];
                    f[0][1] = pre_u[0][1];
                    f[0][2] = pre_u[0][2];

                    b[2][0] = pre_d[0][2];
                    b[2][1] = pre_d[0][1];
                    b[2][2] = pre_d[0][0];

                    u[0][0] = pre_b[2][2];
                    u[0][1] = pre_b[2][1];
                    u[0][2] = pre_b[2][0];

                } else if (a[1] == '-') {
                    l[0][0] = pre_l[2][0];
                    l[1][0] = pre_l[2][1];
                    l[2][0] = pre_l[2][2];
                    l[0][1] = pre_l[1][0];
                    l[1][1] = pre_l[1][1];
                    l[2][1] = pre_l[1][2];
                    l[0][2] = pre_l[0][0];
                    l[1][2] = pre_l[0][1];
                    l[2][2] = pre_l[0][2];

                    d[0][0] = pre_b[2][2];
                    d[0][1] = pre_b[2][1];
                    d[0][2] = pre_b[2][0];


                    b[2][0] = pre_u[0][2];
                    b[2][1] = pre_u[0][1];
                    b[2][2] = pre_u[0][0];

                    u[0][0] = pre_f[0][0];
                    u[0][1] = pre_f[0][1];
                    u[0][2] = pre_f[0][2];

                    f[0][0] = pre_d[0][0];
                    f[0][1] = pre_d[0][1];
                    f[0][2] = pre_d[0][2];
                }
            }else if(a[0] == 'R'){
                if (a[1] == '+') {
                    r[0][0] = pre_r[0][2];
                    r[1][0] = pre_r[0][1];
                    r[2][0] = pre_r[0][0];
                    r[0][1] = pre_r[1][2];
                    r[1][1] = pre_r[1][1];
                    r[2][1] = pre_r[1][0];
                    r[0][2] = pre_r[2][2];
                    r[1][2] = pre_r[2][1];
                    r[2][2] = pre_r[2][0];

                    d[2][0] = pre_b[0][2];
                    d[2][1] = pre_b[0][1];
                    d[2][2] = pre_b[0][0];


                    f[2][0] = pre_d[2][0];
                    f[2][1] = pre_d[2][1];
                    f[2][2] = pre_d[2][2];

                    u[2][0] = pre_f[2][0];
                    u[2][1] = pre_f[2][1];
                    u[2][2] = pre_f[2][2];

                    b[0][0] = pre_u[2][2];
                    b[0][1] = pre_u[2][1];
                    b[0][2] = pre_u[2][0];

                } else if (a[1] == '-') {
                    r[0][0] = pre_r[2][0];
                    r[1][0] = pre_r[2][1];
                    r[2][0] = pre_r[2][2];
                    r[0][1] = pre_r[1][0];
                    r[1][1] = pre_r[1][1];
                    r[2][1] = pre_r[1][2];
                    r[0][2] = pre_r[0][0];
                    r[1][2] = pre_r[0][1];
                    r[2][2] = pre_r[0][2];

                    u[2][0] = pre_b[0][2];
                    u[2][1] = pre_b[0][1];
                    u[2][2] = pre_b[0][0];


                    f[2][0] = pre_u[2][0];
                    f[2][1] = pre_u[2][1];
                    f[2][2] = pre_u[2][2];

                    d[2][0] = pre_f[2][0];
                    d[2][1] = pre_f[2][1];
                    d[2][2] = pre_f[2][2];

                    b[0][0] = pre_d[2][2];
                    b[0][1] = pre_d[2][1];
                    b[0][2] = pre_d[2][0];
                }
            }


        }

        for (int i = 0; i < 3; i++) {
            for (int j = 0; j < 3; j++) {
                cout << u[j][i];
            }
            cout << "\n";
        }


    }

    return 0;
}